<div class="dashboard fullviewComponent widget-row learner-performance-fullview">
  <div class="row">
    <div class="widget-heading fullview-heading col-md-6">
      <span>
        <i class="fas fa-angle-left" routerLink="/"></i>
      </span>
      <span> Score Distribution </span>
    </div>
    <!-- <div class="col-md-6">
      <app-filter-widget [viewData]="filtersData" (filterEvent)="getFilterObject($event)"></app-filter-widget>
    </div> -->
  </div>

  <div class="widget-block">

    <div class="float-left form-inline">
      <span>
        <b>Display Graph for </b>
      </span>
      <select class="custom-select w-90 m-l-8" [(ngModel)]="showDetails" (change)='getDataFromService()' id="inputGroupSelect02">
        <option [value]="'test'">Test Scores</option>
        <option [value]="'quiz'">Quizzes</option>
        <option [value]="'assignment'">Assignments</option>
      </select>
    </div>

    <div class="col-md-12" appScoreChart [data]='dataSet'></div>

    <table class="table table-borderless">
      <thead>
        <tr>
          <th scope="col">
            <span *ngIf="!searchBox">
              <span (click)="searchFn()">
                <i class="fa fa-search" aria-hidden="true"></i>
              </span>
              <span (click)="sortByFn('learnerName')">
                Learner Name
                <i class="fa fa-sort" aria-hidden="true"></i>
              </span>
            </span>
            <span class="list-inline-item searchList" *ngIf="searchBox">
              <div class="search-org-user">
                <span class="search-icon" (click)="closeSearchFn()">
                  <i class="fas fa-search"></i>
                </span>
                <input type="text" placeholder="Search">
              </div>
            </span>
          </th>
          <th scope="col" (click)="sortByFn('serialNumber')">Sl.No
            <span>
              <i class="fa fa-sort" aria-hidden="true"></i>
            </span>
          </th>
          <th scope="col" (click)="sortByFn('team')">Team
            <span>
              <i class="fa fa-sort" aria-hidden="true"></i>
            </span>
          </th>
          <th scope="col" (click)="sortByFn('batchName')">Batch
            <span>
              <i class="fa fa-sort" aria-hidden="true"></i>
            </span>
          </th>
          <th scope="col" (click)="sortByFn('scoreAvg')">Score Avg
            <span>
              <i class="fa fa-sort" aria-hidden="true"></i>
            </span>
          </th>
          <th scope="col" (click)="sortByFn('noOfAttempts')">No of Re-Attempts
            <span>
              <i class="fa fa-sort" aria-hidden="true"></i>
            </span>
          </th>
          <th scope="col" (click)="sortByFn('Progress')">Progress %
            <span>
              <i class="fa fa-sort" aria-hidden="true"></i>
            </span>
          </th>
        </tr>
      </thead>
      <tbody *ngIf="showDetails == 'test'">
        <tr *ngFor="let testData of responseScoreDetails | orderBy: sortOrder">
          <td class="">{{testData.learnerName}}</td>
          <td class="">{{testData.serialNumber}}</td>
          <td class="">{{testData.team}}</td>
          <td class="">{{testData.batchName}}</td>
          <td class="">{{testData.scoreAvg}}</td>
          <td class="">{{testData.noOfAttempts}}</td>
          <td class="">{{testData.Progress}}</td>
        </tr>
      </tbody>
      <tbody *ngIf="showDetails == 'quiz'">
        <tr *ngFor="let quizData of responseScoreDetails | orderBy: sortOrder">
          <td class="">{{quizData.learnerName}}</td>
          <td class="">{{quizData.serialNumber}}</td>
          <td class="">{{quizData.team}}</td>
          <td class="">{{quizData.batchName}}</td>
          <td class="">{{quizData.scoreAvg}}</td>
          <td class="">{{quizData.noOfAttempts}}</td>
          <td class="">{{quizData.Progress}}</td>
        </tr>
      </tbody>
      <tbody *ngIf="showDetails == 'assignment'">
        <tr *ngFor="let assignmentData of responseScoreDetails | orderBy: sortOrder">
          <td class="">{{assignmentData.learnerName}}</td>
          <td class="">{{assignmentData.serialNumber}}</td>
          <td class="">{{assignmentData.team}}</td>
          <td class="">{{assignmentData.batchName}}</td>
          <td class="">{{assignmentData.scoreAvg}}</td>
          <td class="">{{assignmentData.noOfAttempts}}</td>
          <td class="">{{assignmentData.Progress}}</td>
        </tr>
      </tbody>
    </table>
    <div class="row float-right">
      <ngb-pagination class="d-flex justify-content-end" [collectionSize]=total_records [(page)]=page [maxSize]="5"></ngb-pagination>
      <span style="padding-left: 10px;padding-top: 7px;">Go to page</span>
      <span style="padding-left: 10px;padding-top: 3px;">
        <input style="border:1px solid #007bff;height: 28px;" type="text" [(ngModel)]="selectPage">
      </span>
      <span style="padding-left: 10px;">
        <button class="btn btn-primary" (click)="goToPage(selectPage)" style="width: 90px;">Go</button>
      </span>
    </div>
  </div>
</div>
